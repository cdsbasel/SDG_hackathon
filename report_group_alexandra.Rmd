---
title: "Unibas SDG Report"
description: "CDS Brown Bag"
output: 
      html_document:
            toc: true
            toc_float: 
              collapsed: false
              smooth_scroll: true
            theme: flatly 
            df_print: paged
---

```{r setup, include=FALSE}
library(tidyverse)
knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message = FALSE)
```

# Introduction

Describe mission: Detect SDGs in research output of the University of Basel per request of Sustainability Office of Unibas.

<img src="https://upload.wikimedia.org/wikipedia/commons/d/df/Sustainable_Development_Goals.png"></img>

### Data
```{r, echo = F}
projects_sdg_elsevier <- projects_sdg %>% select(lead:doc_id, `SDG-01-Elsevier`:`SDG-16-Elsevier`) %>% pivot_longer(cols = `SDG-01-Elsevier`:`SDG-16-Elsevier`, names_to = "SDG", values_to = "match")
publications_sdg_elsevier <- publications_sdg %>% select(type:doc_id, `SDG-01-Elsevier`:`SDG-16-Elsevier`) %>% filter(type == "article") %>% pivot_longer(cols = `SDG-01-Elsevier`:`SDG-16-Elsevier`, names_to = "SDG", values_to = "match")
```

Research database & Grants office database

Three files correspinding to different research items: publications, projects (self funded), projects (externally funded)


### Methodological 

Limit to 2010 to 2020

Query search using Aurora (Link) and Elsevier (Link). Goldstandard? What are other Universities doing (Comparable)? Why are they different? Discuss caveats.
 
Conducted using corpustools R package and translations of the queries.

Choice of organizational unit

# Distribution of SDG

```{r, echo = F}
total_articles <- length(unique(publications_sdg_elsevier$doc_id))
total_projects <- length(unique(projects_sdg_elsevier$doc_id))
sdg_project_match <- projects_sdg_elsevier %>% group_by(doc_id) %>% summarise(sum_match = sum(match)) %>% filter(sum_match > 0)
sdg_project_match <- nrow(sdg_project_match)
sdg_publications_match <- publications_sdg_elsevier %>% group_by(doc_id) %>% summarise(sum_match = sum(match)) %>% filter(sum_match > 0)
sdg_publications_match <- nrow(sdg_publications_match)
```
Text including numbers computed using inline code: No. articles, No. of projects, No. of matches (any SDG) in both. 

In the publications from Elsevier, there were a total of `r total_articles` articles and `r total_projects` projects. From these,  `r sdg_publications_match` articles matched at least one SDG. From the projects, `r sdg_project_match` articles matched at least one SDG. From the publications, `r sdg_publications_match` matched at least one SDG.

Text describing results in Figure. 

Figure showing frequency of SDG matches by SDG, output type (publication, self-funded project, externally-funded project), and system (Aurora & Elsevier)

# Distribution of SDG across Time

Only meaningful Elsevir

# Distribution of SDG by organizational unit

Text describing organizational units incl. inline computed numbers. 

For the publications, we identified 15 organisational units, which published a total of ... articles which matched at least one SDG. The organization with the most articles were ...
For the projects, we identified 13 organisational units, which were involved in a total of ...projects which matched at least one SDG. The organization with the most projects were ...


```{r}
publications_org <- publications_sdg_elsevier %>%
  pivot_longer(starts_with("Org-"), names_to = "Organisations") %>%
  filter(match == TRUE & value == TRUE) %>%
  group_by(Organisations) %>%
  count()


projects_org <- projects_sdg_elsevier %>%
  pivot_longer(starts_with("Org-"), names_to = "Organisations") %>%
  filter(match == TRUE & value == TRUE) %>%
  group_by(Organisations) %>%
  count() 

```


Text describing results in Figure. 

Figure showing frequency of SDGs by unit.

Interdisciplinarity (one unit versus multiple units?)


